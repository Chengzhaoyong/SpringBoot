<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>动态添加文件上传列表</title>
    <link href="asserts/css/bootstrap.min.css" th:href="@{/webjars/bootstrap/4.0.0/css/bootstrap.css}" rel="stylesheet">
    <script th:src="@{/asserts/js/jquery-3.2.1.slim.min.js}"></script>
</head>
<body>

<div th:if="${uploadStatus}" style="color:red;" th:text="${uploadStatus}">上传成功</div>

<form th:action="@{/uploadFile}" method="post" enctype="multipart/form-data">
    上传文件：&nbsp;&nbsp;<input type="button" value="添加文件" onclick="add()">
    <div id="file" style="margin-top: 10px;" th:value="文件上传区域"></div>
    <input type="submit" id="submit" value="上传" style="display: none; margin-top:10px;">
</form>

<script type="text/javascript">
    function add() {
        var innerdiv = "<div>";
        innerdiv += "<input type='file' name='fileUpload' required='required'>" + "<input type='button'" +
            "value='删除' onclick='remove(this)'>";
        innerdiv += "</div>";

        $("#file").append(innerdiv);

        //打开上传按钮
        $("#submit").css("display", "block");

    }


    //删除当前行
    function remove(obj) {
        $(obj).parent().remove();
        if ($("#file div").length == 0) {
            $("#submit").css("display", "none");
        }
    }
</script>

</body>
</html>